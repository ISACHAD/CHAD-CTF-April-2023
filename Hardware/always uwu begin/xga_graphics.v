
//=======================================================
//  This code is generated by Terasic System Builder
//=======================================================

module XGA_Graphics(

	input  wire       CLOCK_50,
    input  wire [3:0] KEY,
    output wire [7:0] VGA_R,
    output wire [7:0] VGA_G,
    output wire [7:0] VGA_B,
    output wire       VGA_CLK,
    output wire       VGA_BLANK_N,
    output wire       VGA_SYNC_N,
    output wire       VGA_HS,
    output wire       VGA_VS);

   wire 	      rst;
   wire 	      in_clock;
   wire 	      sys_clock;
   wire 	      locked;

   wire 	      hsync;
   wire 	      vsync;
   wire 	      csync;
   wire 	      video_on;
   wire [10:0] 	      var_t;
   wire [10:0] 	      var_z;
   wire               var_a;
   wire [10:0] 	      var_d;
   wire [10:0] 	      var_m;
   wire 	      var_k;
	      
  clockgen my_clockgen(in_clock,
							rst,
							sys_clock,
							locked);
							
   vesasync myvesa(sys_clock, 
		   rst, 
		   hsync, 
		   vsync, 
		   csync, 
		   video_on, 
		   var_t, 
		   var_z);
   
   modA #(16, 1024, 768) mymoda(sys_clock,
				      rst,
				      var_a,
				      var_d,
				      var_m);
   
   modB #(16) mymodb(sys_clock, 
			  rst, 
			  var_d,  
			  var_m, 
			  var_t, 
			  var_z, 
			  var_k);
   
   assign rst         = ~KEY[0];
   assign in_clock    = CLOCK_50;
   assign var_a   = (var_z == 769) && (var_t == 0);
   assign VGA_HS      = hsync;
   assign VGA_VS      = vsync;
   assign VGA_SYNC_N  = ~csync;
   assign VGA_BLANK_N = video_on;
   assign VGA_B       = var_k ? 8'h0 : 8'hff;
   assign VGA_R       = var_k ? 8'hff : 8'h0;
   assign VGA_G       = 8'h0;
   assign VGA_CLK     = sys_clock;

endmodule
